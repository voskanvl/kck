<template>
  <div id="app">
    <h1>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏</h1>
    <Tabs @changeTab="changeTab($event)">
      <Tab name="–î–æ—Å—Ç–∞–≤–∫–∞" :selected="activeTab === '–î–æ—Å—Ç–∞–≤–∫–∞'">
        <div class="form1">
          <Input
            title="–§–ò–û"
            placeholder="–¢–æ–ª—å–∫–æ –∫–∏—Ä–∏–ª–∏—Ü–∞"
            role="fio"
            @change="onChange($event, 'fio')"
          />
          <Input
            title="–¢–µ–ª–µ—Ñ–æ–Ω"
            placeholder="+7 (___) ___-__-__"
            role="tel"
            @change="onChange($event, 'tel')"
          />
          <Input
            title="–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏"
            placeholder="–ì–æ—Ä–æ–¥, —É–ª–∏—Ü–∞, –¥–æ–º"
            role="adr"
            @change="onChange($event, 'adr')"
          />
          <Input
            title="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"
            textarea
            role="comment"
            @change="onChange($event, 'comment')"
          />
          <Button :disabled="!validated"> –û—Ç–ø—Ä–∞–≤–∏—Ç—å </Button>
        </div>
      </Tab>
      <Tab name="–°–∞–º–æ–≤—ã–≤–æ–∑" :selected="activeTab === '–°–∞–º–æ–≤—ã–≤–æ–∑'">
        <div class="delivery">
          <Map
            :choise="selectPoint"
            :activeTab="activeTab"
            :selectPoint="selectPoint"
          >
            <Radio
              title="–ü—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–æ–≤ –ü–æ–¥—Å–æ—Å–µ–Ω—Å–∫–∏–π –ø–µ—Ä–µ—É–ª–æ–∫, 11"
              @checked="onCheck($event, '–ü–æ–¥—Å–æ—Å–µ–Ω—Å–∫–∏–π –ø–µ—Ä–µ—É–ª–æ–∫, 11')"
              :selected="isSelected('–ü–æ–¥—Å–æ—Å–µ–Ω—Å–∫–∏–π –ø–µ—Ä–µ—É–ª–æ–∫, 11')"
              name="–ü–æ–¥—Å–æ—Å–µ–Ω—Å–∫–∏–π"
              adr="–ú–æ—Å–∫–≤–∞, –ü–æ–¥—Å–æ—Å–µ–Ω—Å–∫–∏–π –ø–µ—Ä–µ—É–ª–æ–∫, 11"
            />
            <Radio
              title="–ü—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–æ–≤ –ü–µ—Å—á–∞–Ω–∞—è —É–ª–∏—Ü–∞, –¥–æ–º 13"
              :selected="isSelected('–ü–µ—Å—á–∞–Ω–∞—è —É–ª–∏—Ü–∞, –¥–æ–º 13')"
              @checked="onCheck($event, '–ü–µ—Å—á–∞–Ω–∞—è —É–ª–∏—Ü–∞, –¥–æ–º 13')"
              name="–ü–µ—Å—á–∞–Ω–∞—è"
              adr="–ú–æ—Å–∫–≤–∞, –ü–µ—Å—á–∞–Ω–∞—è —É–ª–∏—Ü–∞, –¥–æ–º 13"
            />
            <Radio
              title="–ü—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–æ–≤ –ù–æ–≤—ã–π"
              @checked="onCheck($event, '–ù–æ–≤—ã–π, 11')"
              :selected="isSelected('–ù–æ–≤—ã–π, 11')"
              name="–ù–æ–≤—ã–π"
              adr="–ú–æ—Å–∫–≤–∞, –ù–æ–≤—ã–π, 11"
            />
            <Radio
              title="–ü—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–æ–≤ –°—Ç–∞—Ä—ã–π"
              @checked="onCheck($event, '–°—Ç–∞—Ä—ã–π, 10')"
              :selected="isSelected('–°—Ç–∞—Ä—ã–π, 10')"
              name="–°—Ç–∞—Ä—ã–π"
              adr="–ú–æ—Å–∫–≤–∞, –°—Ç–∞—Ä—ã–π, 10"
            />
          </Map>
          <div class="delivery__sent">
            <Button>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</Button>
          </div>
        </div>
      </Tab>
    </Tabs>
  </div>
</template>

<script>
import Button from "./components/Button/Button.vue";
import Radio from "./components/Radio/Radio.vue";
import Tabs from "./components/Tabs/Tabs.vue";
import Tab from "./components/Tab/Tab.vue";
import Input from "./components/Input/Input.vue";
import Map from "./components/Map_/Map.vue";

export default {
  name: "App",
  components: {
    Input,
    Button,
    Radio,
    Tabs,
    Tab,
    Map,
  },
  data: () => {
    return {
      inputData: {
        fio: "",
        tel: "",
        adr: "",
        comment: "",
      },
      selectPoint: "–ü–æ–¥—Å–æ—Å–µ–Ω—Å–∫–∏–π –ø–µ—Ä–µ—É–ª–æ–∫, 11",
      activeTab: "–î–æ—Å—Ç–∞–≤–∫–∞",
    };
  },
  methods: {
    onCheck(event, adress) {
      this.selectPoint = adress;
      console.log(
        "üöÄ ~ file: App.vue ~ line 112 ~ onCheck ~ this.selectPoint",
        this.selectPoint
      );
    },
    onChange(event, role) {
      this.inputData[role] = event;
    },
    isSelected(adress) {
      return this.selectPoint === adress;
    },
    changeTab(event) {
      this.activeTab = event.newValue.name;
    },
  },
  computed: {
    validated() {
      return (
        this.inputData.fio &&
        this.inputData.tel &&
        this.inputData.tel.match(/\+7\s\(\d{3}\)\s\d{3}-\d{2}-\d{2}/) &&
        this.inputData.adr &&
        this.inputData.comment
      );
    },
  },
};
</script>

<style lang="scss" scoped>
@import "_App.scss";
</style>
